function checkUsername(){0==$("#userRegisterUsername").val().length?($("#userRegisterUsername").css("border",red).attr("title","You need to enter a username"),$("#usernameValidation").removeClass().addClass("fa fa-times").css("color","red").show(),isEmailAddressValid=!1):$.post("./php/users/checkusername.php",{username:$("#userRegisterUsername").val()},function(e){"exists"==e?($("#userRegisterUsername").css("border",red).attr("title","Username already exists"),$("#usernameValidation").removeClass().addClass("fa fa-times").css("color","red").show(),isUsernameValid=!1):"notexists"==e?($("#userRegisterUsername").css("border",green).attr("title","Username doesn't already exist"),$("#usernameValidation").removeClass().addClass("fa fa-check").css("color","green").show(),isUsernameValid=!0):displayMessage("error","Error","Error checking if username exists")}).fail(function(){})}function checkMobile(){$("#userRegisterPhone").intlTelInput("isValidNumber")?($("#userRegisterPhone").css("border",green).attr("title","This is a valid phone number"),$("#phoneValidation").removeClass().addClass("fa fa-check").css("color","green").show(),isMobileNumberValid=!0):($("#userRegisterPhone").css("border",red).attr("title","This phone number is invalid"),$("#phoneValidation").removeClass().addClass("fa fa-times").css("color","red").show(),isMobileNumberValid=!1)}function checkEmail(){0==$("#userRegisterEmail").val().length?($("#userRegisterEmail").css("border",red).attr("title","You need to enter an email address"),$("#emailValidation").removeClass().addClass("fa fa-times").css("color","red").show(),isEmailAddressValid=!1):-1==$("#userRegisterEmail").val().indexOf("@")||-1==$("#userRegisterEmail").val().lastIndexOf(".")||$("#userRegisterEmail").val().lastIndexOf(".")<$("#userRegisterEmail").val().indexOf("@")?($("#userRegisterEmail").css("border",red).attr("title","Your email address needs to include an @ and a . in it"),$("#emailValidation").removeClass().addClass("fa fa-times").css("color","red").show(),isEmailAddressValid=!1):$.post("./php/users/checkemail.php",{email:$("#userRegisterEmail").val()},function(e){"exists"==e?($("#userRegisterEmail").css("border",red).attr("title","This email is already associated with an account"),$("#emailValidation").removeClass().addClass("fa fa-times").css("color","red").show(),isEmailAddressValid=!1):"notexists"==e?($("#userRegisterEmail").css("border",green).attr("title","This email isn't associated with an account"),$("#emailValidation").removeClass().addClass("fa fa-check").css("color","green").show(),isEmailAddressValid=!0):displayMessage("error","Error","Error checking if email exists")}).fail(function(){})}function updateLiveStats(){$.post("./php/users/getlivestats.php",{},function(e){var t="",s=e[1];t=e[1]>365?Math.floor(s/365)+" year"+(s>730?"s":""):e[1]>30?Math.floor(s/30)+" month"+(s>60?"s":""):Math.floor(s)+" day"+(s>2?"s":""),$("#liveStatsRegisteredUserValue").text(e[0]),$("#liveStatsPlayingSinceValue").text(t),$("#liveStatsTournamentPrizeValue").text(""+e[2]),$("#liveStatsLiveQuizzesValue").text(e[3])},"json").fail(function(){})}function addPromotions(){$.post("./php/promotions/getallpromotions.php",{},function(e){if("success"==e[0]){for(var t="",s=0;null!==e[1]&&s<e[1].length;s+=1)t+='    <div class="item ">',t+='        <div class="col-md-4">',t+="true"==sessionStorage.loggedIn?'        <a href="quizinfo.php?id='+e[1][s].quizID+'">':'        <a href="letsplayfree.php?id='+e[1][s].quizID+'">',t+='            <img class="promotionImage img-responsive" src="./php/promotions/uploads/'+e[1][s].imageURL+'">',t+="            </a>",t+="        </div>",t+="    </div>";$("#promotionCarousel .carousel-inner").empty().append(t),$("#promotionCarousel .carousel-inner :nth-child(1)").addClass("active"),0===e.length&&$("#promotions").hide(),$("#promotionCarousel").carousel({interval:7e3}),$("#promotionCarousel.carousel .item").each(function(){var e=$(this).next();e.length||(e=$(this).siblings(":first")),e.children(":first-child").clone().appendTo($(this)),e.next().length>0?e.next().children(":first-child").clone().appendTo($(this)):$(this).siblings(":first").children(":first-child").clone().appendTo($(this))})}else displayMessage("error","","Promotions failed to load. Please use the contact form to inform us of this problem.")},"json").fail(function(){})}function addTestimonials(){$.post("./php/testimonials/getalltestimonials.php",{},function(e){if("success"==e[0]){var t="";t+='<ol class="carousel-indicators">';for(var s=0;null!=e[1]&&s<e[1].length;s+=1)t+='<li data-target="#testimonialCarousel" data-slide-to="'+s+'" class="active"></li>';t+="</ol>",t+='<div class="carousel-inner" role="listbox">';for(var s=0;null!=e[1]&&s<e[1].length;s+=1)t+='   <div class="item ">',t+='       <div class="test1" >',t+='            <img style="width:100px; height:100px;" class="testimonialImages img-circle" src="./php/testimonials/uploads/'+e[1][s].imageURL+'">',t+="       </div>",t+='       <div class="test2"><span class="span1">'+e[1][s].username+' </span> <br/> <span class="student"></span></div>',t+="       <blockquote>",t+="           <p>"+e[1][s].message+"</p>",t+="       </blockquote>",t+="   </div>";t+="</div>",$("#testimonialCarousel").empty().append(t),$("#testimonialCarousel > div > :nth-child(1)").addClass("active"),0==e.length&&$("#testimonials").hide()}else displayMessage("error","","Testimonials failed to load. Please use the contact form to inform us of this problem.")},"json").fail(function(){})}var checkUsernameTimer,checkMobileTimer,checkEmailTimer;window.onload=function(){global(),$('[data-toggle="tooltip"]').tooltip(),$("li.active").removeClass("active"),$("#indexMenuItem").addClass("active"),"true"==sessionStorage.loggedIn?($("#signupForm").hide(),$("#promotions").after($("#liveStats"))):($("#signupForm").show(),$("#signupForm").after($("#liveStats"))),$("#userRegisterUsername").on({input:function(){checkUsernameTimer=setTimeout(checkUsername,500)}}),$("#userRegisterPhone").intlTelInput({initialCountry:"auto",geoIpLookup:function(e){$.get("https://ipinfo.io",function(){},"jsonp").always(function(t){var s=t&&t.country?t.country:"";e(s)})},utilsScript:"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/8.4.9/js/utils.js"}),$("#userRegisterPhone").on({input:function(){checkMobileTimer=setTimeout(checkMobile,500)},focus:function(){$("#userRegisterPhoneExplanation").show(),setTimeout(function(){$("#userRegisterPhoneExplanation").hide()},6e3)}}),$("#userRegisterEmail").on({input:function(){checkEmailTimer=setTimeout(checkEmail,500)}}),updateLiveStats(),setTimeout(updateLiveStats,5e3),addPromotions(),addTestimonials()};
